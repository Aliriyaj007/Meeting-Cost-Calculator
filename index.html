<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Cost Calculator | Professional Edition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        /* ===== CSS RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Default Theme (Google Clean) */
            --color-primary: #4285f4;
            --color-primary-dark: #3367d6;
            --color-secondary: #34a853;
            --color-warning: #fbbc05;
            --color-danger: #ea4335;
            --color-background: #ffffff;
            --color-surface: #f8f9fa;
            --color-surface-variant: #f1f3f4;
            --color-border: #dadce0;
            --color-text: #202124;
            --color-text-secondary: #5f6368;
            --color-text-disabled: #9aa0a6;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 2px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 4px 12px rgba(0, 0, 0, 0.15);
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;
        }

        body {
            font-family: 'Roboto', system-ui, -apple-system, sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
            line-height: 1.5;
            min-height: 100vh;
            transition: background-color var(--transition-normal);
        }

        /* ===== LAYOUT SYSTEM ===== */
        .app-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-md);
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--spacing-lg);
        }

        @media (min-width: 768px) {
            .app-container {
                grid-template-columns: 300px 1fr;
                padding: var(--spacing-lg);
            }
        }

        @media (min-width: 1200px) {
            .app-container {
                grid-template-columns: 320px 1fr 300px;
            }
        }

        .panel {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }

        .panel:hover {
            box-shadow: var(--shadow-md);
        }

        /* ===== TYPOGRAPHY SYSTEM ===== */
        h1, h2, h3, h4 {
            font-weight: 500;
            line-height: 1.2;
            margin-bottom: var(--spacing-md);
        }

        h1 {
            font-size: 2rem;
            color: var(--color-primary);
        }

        h2 {
            font-size: 1.5rem;
            border-bottom: 2px solid var(--color-border);
            padding-bottom: var(--spacing-sm);
        }

        h3 {
            font-size: 1.125rem;
            color: var(--color-text-secondary);
        }

        .text-monospace {
            font-family: 'Roboto Mono', monospace;
        }

        .text-primary { color: var(--color-primary); }
        .text-secondary { color: var(--color-text-secondary); }
        .text-danger { color: var(--color-danger); }
        .text-success { color: var(--color-secondary); }

        /* ===== COMPONENT SYSTEM ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-primary);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-weight: 500;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .btn:hover {
            background: var(--color-primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--color-surface-variant);
            color: var(--color-text);
        }

        .btn-danger {
            background: var(--color-danger);
        }

        .btn-success {
            background: var(--color-secondary);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--color-primary);
            color: var(--color-primary);
        }

        .btn-icon {
            padding: var(--spacing-sm);
            border-radius: 50%;
            min-width: 36px;
            min-height: 36px;
        }

        .input-group {
            margin-bottom: var(--spacing-md);
        }

        label {
            display: block;
            margin-bottom: var(--spacing-xs);
            font-weight: 500;
            color: var(--color-text-secondary);
            font-size: 0.875rem;
        }

        input, select, textarea {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            background: var(--color-background);
            color: var(--color-text);
            font-family: inherit;
            font-size: 1rem;
            transition: border-color var(--transition-fast);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
        }

        .slider-container {
            padding: var(--spacing-md) 0;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--color-surface-variant);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: var(--shadow-md);
        }

        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: var(--shadow-md);
        }

        .card {
            background: var(--color-background);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--color-border);
            transition: all var(--transition-fast);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            background: var(--color-surface-variant);
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--color-text-secondary);
        }

        .badge-primary {
            background: var(--color-primary);
            color: white;
        }

        /* ===== ANIMATIONS ===== */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .slide-in {
            animation: slideIn var(--transition-normal);
        }

        /* ===== SPECIFIC COMPONENTS ===== */
        .theme-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
        }

        .theme-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: transform var(--transition-fast);
        }

        .theme-option:hover {
            transform: scale(1.1);
        }

        .theme-option.active {
            border-color: var(--color-text);
            transform: scale(1.1);
        }

        .cost-meter {
            text-align: center;
            padding: var(--spacing-xl);
            background: linear-gradient(135deg, var(--color-surface-variant), var(--color-surface));
            border-radius: var(--radius-lg);
            margin: var(--spacing-lg) 0;
        }

        .cost-amount {
            font-size: 3.5rem;
            font-weight: 700;
            font-family: 'Roboto Mono', monospace;
            color: var(--color-primary);
            margin: var(--spacing-md) 0;
            line-height: 1;
        }

        .cost-per-minute {
            font-size: 1.25rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-lg);
        }

        .attendee-list {
            max-height: 300px;
            overflow-y: auto;
            margin: var(--spacing-md) 0;
            padding-right: var(--spacing-sm);
        }

        .attendee-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-background);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-xs);
            border-left: 4px solid var(--color-primary);
        }

        .attendee-role {
            font-weight: 500;
        }

        .attendee-cost {
            font-family: 'Roboto Mono', monospace;
            font-weight: 500;
        }

        .visualization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .visualization-item {
            text-align: center;
            padding: var(--spacing-md);
            background: var(--color-surface-variant);
            border-radius: var(--radius-md);
            transition: transform var(--transition-fast);
        }

        .visualization-item:hover {
            transform: translateY(-2px);
        }

        .visualization-icon {
            font-size: 2rem;
            margin-bottom: var(--spacing-sm);
        }

        /* ===== CUSTOMIZATION PANEL ===== */
        .customization-section {
            margin-bottom: var(--spacing-xl);
        }

        .settings-group {
            background: var(--color-surface);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        /* ===== UTILITY CLASSES ===== */
        .mt-1 { margin-top: var(--spacing-sm); }
        .mt-2 { margin-top: var(--spacing-md); }
        .mt-3 { margin-top: var(--spacing-lg); }
        .mb-1 { margin-bottom: var(--spacing-sm); }
        .mb-2 { margin-bottom: var(--spacing-md); }
        .mb-3 { margin-bottom: var(--spacing-lg); }
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-1 { gap: var(--spacing-sm); }
        .gap-2 { gap: var(--spacing-md); }
        .gap-3 { gap: var(--spacing-lg); }
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .w-full { width: 100%; }

        /* ===== RESPONSIVE ADJUSTMENTS ===== */
        @media (max-width: 767px) {
            .app-container {
                padding: var(--spacing-sm);
                gap: var(--spacing-md);
            }
            
            .panel {
                padding: var(--spacing-md);
            }
            
            .cost-amount {
                font-size: 2.5rem;
            }
            
            .visualization-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }

        /* ===== SCROLLBAR STYLING ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-surface-variant);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-text-secondary);
        }
    </style>
</head>
<body>
    <!-- ===== MAIN APP CONTAINER ===== -->
    <div class="app-container">
        
        <!-- ===== LEFT PANEL: ATTENDEE BUILDER ===== -->
        <div class="panel">
            <div class="flex justify-between items-center mb-3">
                <h2>Attendee Builder</h2>
                <button id="btn-add-role" class="btn btn-icon" title="Add Custom Role">
                    <span class="material-symbols-outlined">add</span>
                </button>
            </div>
            
            <!-- Role Library -->
            <div class="input-group">
                <label>Role Library</label>
                <select id="select-role" class="mb-2">
                    <option value="">Select a role...</option>
                </select>
                <button id="btn-add-from-library" class="btn btn-secondary w-full">
                    <span class="material-symbols-outlined">person_add</span>
                    Add to Meeting
                </button>
            </div>
            
            <!-- Custom Role Creation -->
            <div class="card mb-3">
                <h3>Create Custom Role</h3>
                <div class="input-group">
                    <input type="text" id="input-role-name" placeholder="Role title">
                </div>
                <div class="input-group">
                    <input type="number" id="input-role-salary" placeholder="Annual salary">
                </div>
                <div class="input-group">
                    <select id="select-currency">
                        <option value="USD">USD ($)</option>
                        <option value="EUR">EUR (‚Ç¨)</option>
                        <option value="GBP">GBP (¬£)</option>
                        <option value="JPY">JPY (¬•)</option>
                    </select>
                </div>
                <button id="btn-save-role" class="btn btn-outline w-full">
                    <span class="material-symbols-outlined">save</span>
                    Save Role
                </button>
            </div>
            
            <!-- Attendee List -->
            <div class="attendee-list" id="attendee-list">
                <!-- Dynamic content -->
            </div>
            
            <div class="text-center mt-3">
                <div class="badge mb-2" id="total-attendees">0 attendees</div>
                <button id="btn-clear-all" class="btn btn-outline w-full">
                    <span class="material-symbols-outlined">delete</span>
                    Clear All
                </button>
            </div>
        </div>
        
        <!-- ===== CENTER PANEL: MAIN CALCULATOR ===== -->
        <div class="panel">
            <!-- App Header -->
            <div class="flex justify-between items-center mb-3">
                <h1>Meeting Cost Calculator</h1>
                <div class="flex gap-1">
                    <button id="btn-export" class="btn btn-icon" title="Export Data">
                        <span class="material-symbols-outlined">download</span>
                    </button>
                    <button id="btn-import" class="btn btn-icon" title="Import Data">
                        <span class="material-symbols-outlined">upload</span>
                    </button>
                    <button id="btn-settings" class="btn btn-icon" title="Settings">
                        <span class="material-symbols-outlined">settings</span>
                    </button>
                </div>
            </div>
            
            <!-- Duration Controls -->
            <div class="card mb-3">
                <h3>Meeting Duration</h3>
                <div class="slider-container">
                    <input type="range" min="15" max="240" value="60" step="5" class="slider" id="duration-slider">
                    <div class="flex justify-between mt-1">
                        <span>15 min</span>
                        <span id="duration-value">60 min</span>
                        <span>4 hours</span>
                    </div>
                </div>
                
                <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: var(--spacing-sm); margin-top: var(--spacing-md);">
                    <button class="btn btn-secondary" data-duration="30">30 min</button>
                    <button class="btn btn-secondary" data-duration="45">45 min</button>
                    <button class="btn btn-secondary" data-duration="60">1 hour</button>
                    <button class="btn btn-secondary" data-duration="90">1.5 hours</button>
                </div>
            </div>
            
            <!-- Frequency Selector -->
            <div class="card mb-3">
                <h3>Meeting Frequency</h3>
                <div class="flex gap-2">
                    <button class="btn btn-secondary active" data-frequency="1">One-time</button>
                    <button class="btn btn-secondary" data-frequency="52">Weekly</button>
                    <button class="btn btn-secondary" data-frequency="26">Bi-weekly</button>
                    <button class="btn btn-secondary" data-frequency="12">Monthly</button>
                </div>
            </div>
            
            <!-- Cost Meter -->
            <div class="cost-meter">
                <h3>Total Meeting Cost</h3>
                <div class="cost-amount" id="total-cost">$0.00</div>
                <div class="cost-per-minute" id="cost-per-minute">$0.00 per minute</div>
                <div class="text-secondary" id="annual-projection">Annual projection: $0.00</div>
            </div>
            
            <!-- Alternative Uses Visualization -->
            <div class="mt-3">
                <h3>What Else Could This Buy?</h3>
                <div class="visualization-grid" id="alternative-uses">
                    <!-- Dynamic content -->
                </div>
            </div>
        </div>
        
        <!-- ===== RIGHT PANEL: THEMES & CUSTOMIZATION ===== -->
        <div class="panel">
            <!-- Theme Selector -->
            <div class="customization-section">
                <h2>Theme Selector</h2>
                <p class="text-secondary mb-2">Choose from 7 premium themes</p>
                <div class="theme-selector" id="theme-selector">
                    <!-- Dynamic theme buttons -->
                </div>
            </div>
            
            <!-- Settings Panel (Initially Hidden) -->
            <div id="settings-panel" class="hidden">
                <div class="customization-section">
                    <h2>Customization Settings</h2>
                    
                    <div class="settings-group">
                        <h3>Display Settings</h3>
                        <div class="checkbox-group">
                            <input type="checkbox" id="setting-animations" checked>
                            <label for="setting-animations">Enable animations</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="setting-tooltips" checked>
                            <label for="setting-tooltips">Show tooltips</label>
                        </div>
                        <div class="input-group">
                            <label for="setting-decimals">Decimal places</label>
                            <input type="range" min="0" max="4" value="2" class="slider" id="setting-decimals">
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h3>Calculation Settings</h3>
                        <div class="input-group">
                            <label for="setting-workdays">Work days per year</label>
                            <input type="number" id="setting-workdays" value="260" min="1" max="365">
                        </div>
                        <div class="input-group">
                            <label for="setting-hours">Hours per day</label>
                            <input type="number" id="setting-hours" value="8" min="1" max="24">
                        </div>
                    </div>
                    
                    <div class="flex gap-2 mt-3">
                        <button id="btn-save-settings" class="btn btn-success">Save Settings</button>
                        <button id="btn-reset-settings" class="btn btn-outline">Reset to Defaults</button>
                    </div>
                </div>
                
                <!-- Import/Export Section -->
                <div class="customization-section">
                    <h2>Data Management</h2>
                    <div class="flex flex-col gap-2">
                        <button id="btn-export-data" class="btn">
                            <span class="material-symbols-outlined">download</span>
                            Export All Data
                        </button>
                        <button id="btn-import-data" class="btn btn-secondary">
                            <span class="material-symbols-outlined">upload</span>
                            Import Data
                        </button>
                        <input type="file" id="file-import" accept=".json" class="hidden">
                    </div>
                </div>
                
                <!-- User Guide -->
                <div class="customization-section">
                    <h2>User Guide</h2>
                    <div class="card">
                        <h4>How to Use</h4>
                        <p class="mb-2">1. Add attendees using the Role Library or create custom roles</p>
                        <p class="mb-2">2. Set meeting duration using slider or quick buttons</p>
                        <p class="mb-2">3. Choose meeting frequency for annual projections</p>
                        <p class="mb-2">4. View real-time cost calculations and alternative uses</p>
                        <p>5. Customize themes and settings to your preference</p>
                    </div>
                </div>
                
                <!-- Credits -->
                <div class="text-center mt-3">
                    <p>Made with ‚ù§Ô∏è by <a href="https://github.com/Aliriyaj007" target="_blank" style="color: var(--color-primary); text-decoration: none; font-weight: 500;">Aliriyaj007</a></p>
                    <p class="text-secondary" style="font-size: 0.875rem;">Version 2.0.0</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== MODAL FOR CUSTOM ROLE EDIT ===== -->
    <div id="modal-role" class="hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;">
        <div class="panel" style="max-width: 400px; margin: var(--spacing-md);">
            <h2>Edit Role</h2>
            <div class="input-group">
                <input type="text" id="modal-role-name" placeholder="Role title">
            </div>
            <div class="input-group">
                <input type="number" id="modal-role-salary" placeholder="Annual salary">
            </div>
            <div class="flex gap-2 mt-3">
                <button id="btn-modal-save" class="btn">Save Changes</button>
                <button id="btn-modal-cancel" class="btn btn-secondary">Cancel</button>
                <button id="btn-modal-delete" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>

    <!-- ===== JAVASCRIPT ===== -->
    <script>
        (function() {
            'use strict';
            
            // ===== STATE MANAGEMENT MODULE =====
            const state = (function() {
                // Default roles
                const defaultRoles = [
                    { id: 'engineer', name: 'Senior Engineer', salary: 150000, currency: 'USD' },
                    { id: 'manager', name: 'Engineering Manager', salary: 180000, currency: 'USD' },
                    { id: 'director', name: 'Director', salary: 220000, currency: 'USD' },
                    { id: 'designer', name: 'UX Designer', salary: 120000, currency: 'USD' },
                    { id: 'pm', name: 'Product Manager', salary: 140000, currency: 'USD' },
                    { id: 'intern', name: 'Intern', salary: 60000, currency: 'USD' }
                ];
                
                // Alternative uses data
                const alternativeUses = [
                    { id: 'laptop', label: 'Laptops', cost: 1200, icon: 'üíª' },
                    { id: 'coffee', label: 'Coffee Cups', cost: 4, icon: '‚òï' },
                    { id: 'books', label: 'Tech Books', cost: 50, icon: 'üìö' },
                    { id: 'cloud', label: 'AWS Credits', cost: 100, icon: '‚òÅÔ∏è' },
                    { id: 'course', label: 'Online Courses', cost: 200, icon: 'üéì' },
                    { id: 'desk', label: 'Standing Desks', cost: 500, icon: 'ü™ë' }
                ];
                
                // Themes configuration
                const themes = {
                    'light': {
                        name: 'Google Clean',
                        colors: {
                            primary: '#4285f4',
                            primaryDark: '#3367d6',
                            secondary: '#34a853',
                            warning: '#fbbc05',
                            danger: '#ea4335',
                            background: '#ffffff',
                            surface: '#f8f9fa',
                            surfaceVariant: '#f1f3f4',
                            border: '#dadce0',
                            text: '#202124',
                            textSecondary: '#5f6368',
                            textDisabled: '#9aa0a6'
                        }
                    },
                    'dark': {
                        name: 'Dark OLED',
                        colors: {
                            primary: '#8ab4f8',
                            primaryDark: '#669df6',
                            secondary: '#81c995',
                            warning: '#fdd663',
                            danger: '#f28b82',
                            background: '#0d0d0d',
                            surface: '#1a1a1a',
                            surfaceVariant: '#2d2d2d',
                            border: '#404040',
                            text: '#e8eaed',
                            textSecondary: '#9aa0a6',
                            textDisabled: '#5f6368'
                        }
                    },
                    'midnight': {
                        name: 'Midnight Blue',
                        colors: {
                            primary: '#5e97f6',
                            primaryDark: '#4285f4',
                            secondary: '#57bb8a',
                            warning: '#f9ab00',
                            danger: '#e87167',
                            background: '#0a192f',
                            surface: '#172a45',
                            surfaceVariant: '#2d3f5d',
                            border: '#3d506f',
                            text: '#ccd6f6',
                            textSecondary: '#8892b0',
                            textDisabled: '#495670'
                        }
                    },
                    'emerald': {
                        name: 'Emerald Green',
                        colors: {
                            primary: '#10b981',
                            primaryDark: '#0da271',
                            secondary: '#3b82f6',
                            warning: '#f59e0b',
                            danger: '#ef4444',
                            background: '#f0fdf4',
                            surface: '#dcfce7',
                            surfaceVariant: '#bbf7d0',
                            border: '#86efac',
                            text: '#064e3b',
                            textSecondary: '#047857',
                            textDisabled: '#6ee7b7'
                        }
                    },
                    'sunset': {
                        name: 'Sunset Gradient',
                        colors: {
                            primary: '#f97316',
                            primaryDark: '#ea580c',
                            secondary: '#8b5cf6',
                            warning: '#f59e0b',
                            danger: '#ef4444',
                            background: 'linear-gradient(135deg, #fef3c7, #fde68a)',
                            surface: 'rgba(255, 255, 255, 0.9)',
                            surfaceVariant: 'rgba(254, 243, 199, 0.7)',
                            border: '#fbbf24',
                            text: '#7c2d12',
                            textSecondary: '#92400e',
                            textDisabled: '#d97706'
                        }
                    },
                    'minimal': {
                        name: 'Minimal Gray',
                        colors: {
                            primary: '#6b7280',
                            primaryDark: '#4b5563',
                            secondary: '#9ca3af',
                            warning: '#d97706',
                            danger: '#dc2626',
                            background: '#f9fafb',
                            surface: '#f3f4f6',
                            surfaceVariant: '#e5e7eb',
                            border: '#d1d5db',
                            text: '#111827',
                            textSecondary: '#374151',
                            textDisabled: '#9ca3af'
                        }
                    },
                    'purple': {
                        name: 'Purple Accent',
                        colors: {
                            primary: '#8b5cf6',
                            primaryDark: '#7c3aed',
                            secondary: '#10b981',
                            warning: '#f59e0b',
                            danger: '#ef4444',
                            background: '#faf5ff',
                            surface: '#f3e8ff',
                            surfaceVariant: '#e9d5ff',
                            border: '#d8b4fe',
                            text: '#581c87',
                            textSecondary: '#7c3aed',
                            textDisabled: '#c4b5fd'
                        }
                    }
                };
                
                // App state
                let currentState = {
                    attendees: [],
                    duration: 60,
                    frequency: 1,
                    currency: 'USD',
                    theme: 'light',
                    settings: {
                        animations: true,
                        tooltips: true,
                        decimals: 2,
                        workDays: 260,
                        hoursPerDay: 8
                    },
                    customRoles: [],
                    selectedRoleId: null
                };
                
                // Load from localStorage
                function loadState() {
                    try {
                        const saved = localStorage.getItem('meetingCostCalculatorState');
                        if (saved) {
                            const parsed = JSON.parse(saved);
                            currentState = { ...currentState, ...parsed };
                        }
                    } catch (e) {
                        console.warn('Failed to load state:', e);
                    }
                }
                
                // Save to localStorage
                function saveState() {
                    try {
                        localStorage.setItem('meetingCostCalculatorState', JSON.stringify(currentState));
                    } catch (e) {
                        console.warn('Failed to save state:', e);
                    }
                }
                
                // Get all roles (default + custom)
                function getAllRoles() {
                    return [...defaultRoles, ...currentState.customRoles];
                }
                
                // Calculate meeting cost
                function calculateCosts() {
                    const totalMinutes = currentState.duration;
                    const workMinutesPerYear = currentState.settings.workDays * currentState.settings.hoursPerDay * 60;
                    
                    let totalCost = 0;
                    const attendeeDetails = currentState.attendees.map(attendee => {
                        const role = getAllRoles().find(r => r.id === attendee.roleId);
                        if (!role) return null;
                        
                        const costPerMinute = role.salary / workMinutesPerYear;
                        const attendeeCost = costPerMinute * totalMinutes;
                        totalCost += attendeeCost;
                        
                        return {
                            ...attendee,
                            roleName: role.name,
                            salary: role.salary,
                            currency: role.currency,
                            costPerMinute,
                            totalCost: attendeeCost
                        };
                    }).filter(Boolean);
                    
                    const costPerMinute = totalCost / totalMinutes;
                    const annualCost = totalCost * currentState.frequency;
                    
                    return {
                        totalCost,
                        costPerMinute,
                        annualCost,
                        attendeeDetails
                    };
                }
                
                // Calculate alternative uses
                function calculateAlternativeUses(totalCost) {
                    return alternativeUses.map(item => ({
                        ...item,
                        quantity: Math.floor(totalCost / item.cost) || 0,
                        value: Math.floor(totalCost / item.cost) * item.cost
                    }));
                }
                
                return {
                    loadState,
                    saveState,
                    getAllRoles,
                    calculateCosts,
                    calculateAlternativeUses,
                    getState: () => currentState,
                    updateState: (updates) => {
                        currentState = { ...currentState, ...updates };
                        saveState();
                        return currentState;
                    },
                    getThemes: () => themes,
                    getDefaultRoles: () => defaultRoles,
                    getAlternativeUses: () => alternativeUses
                };
            })();
            
            // ===== UI RENDERING MODULE =====
            const ui = (function() {
                // DOM Elements
                const elements = {
                    attendeeList: document.getElementById('attendee-list'),
                    totalCost: document.getElementById('total-cost'),
                    costPerMinute: document.getElementById('cost-per-minute'),
                    annualProjection: document.getElementById('annual-projection'),
                    alternativeUses: document.getElementById('alternative-uses'),
                    themeSelector: document.getElementById('theme-selector'),
                    totalAttendees: document.getElementById('total-attendees'),
                    durationValue: document.getElementById('duration-value'),
                    durationSlider: document.getElementById('duration-slider'),
                    selectRole: document.getElementById('select-role'),
                    settingsPanel: document.getElementById('settings-panel'),
                    modalRole: document.getElementById('modal-role')
                };
                
                // Format currency
                function formatCurrency(amount, currency = 'USD', decimals = 2) {
                    const formatter = new Intl.NumberFormat('en-US', {
                        style: 'currency',
                        currency: currency,
                        minimumFractionDigits: decimals,
                        maximumFractionDigits: decimals
                    });
                    return formatter.format(amount);
                }
                
                // Render attendee list
                function renderAttendeeList(attendeeDetails) {
                    elements.attendeeList.innerHTML = '';
                    
                    if (attendeeDetails.length === 0) {
                        elements.attendeeList.innerHTML = `
                            <div class="text-center text-secondary" style="padding: var(--spacing-xl);">
                                <span class="material-symbols-outlined" style="font-size: 3rem; opacity: 0.5;">group</span>
                                <p>No attendees added yet</p>
                            </div>
                        `;
                        return;
                    }
                    
                    attendeeDetails.forEach((attendee, index) => {
                        const item = document.createElement('div');
                        item.className = 'attendee-item slide-in';
                        item.innerHTML = `
                            <div>
                                <div class="attendee-role">${attendee.roleName}</div>
                                <div class="text-secondary" style="font-size: 0.875rem;">
                                    ${formatCurrency(attendee.salary, attendee.currency)}/year
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="attendee-cost">${formatCurrency(attendee.totalCost, attendee.currency, state.getState().settings.decimals)}</div>
                                <div class="text-secondary" style="font-size: 0.75rem;">
                                    ${formatCurrency(attendee.costPerMinute, attendee.currency, 4)}/min
                                </div>
                            </div>
                        `;
                        
                        item.addEventListener('click', () => {
                            // Remove attendee
                            const currentAttendees = state.getState().attendees;
                            currentAttendees.splice(index, 1);
                            state.updateState({ attendees: [...currentAttendees] });
                            renderAll();
                        });
                        
                        elements.attendeeList.appendChild(item);
                    });
                    
                    elements.totalAttendees.textContent = `${attendeeDetails.length} attendee${attendeeDetails.length !== 1 ? 's' : ''}`;
                }
                
                // Render cost meter
                function renderCostMeter(costs) {
                    const decimals = state.getState().settings.decimals;
                    const currency = state.getState().currency;
                    
                    elements.totalCost.textContent = formatCurrency(costs.totalCost, currency, decimals);
                    elements.costPerMinute.textContent = `${formatCurrency(costs.costPerMinute, currency, 4)} per minute`;
                    elements.annualProjection.textContent = `Annual projection: ${formatCurrency(costs.annualCost, currency, decimals)}`;
                    
                    // Add pulse animation if cost > 0
                    if (costs.totalCost > 0 && state.getState().settings.animations) {
                        elements.totalCost.classList.add('pulse');
                        setTimeout(() => elements.totalCost.classList.remove('pulse'), 2000);
                    }
                }
                
                // Render alternative uses
                function renderAlternativeUses(alternativeUsesData) {
                    elements.alternativeUses.innerHTML = '';
                    
                    alternativeUsesData.forEach(item => {
                        if (item.quantity > 0) {
                            const elem = document.createElement('div');
                            elem.className = 'visualization-item';
                            elem.innerHTML = `
                                <div class="visualization-icon">${item.icon}</div>
                                <div style="font-size: 1.5rem; font-weight: 700; margin-bottom: var(--spacing-xs);">
                                    ${item.quantity}
                                </div>
                                <div style="font-size: 0.875rem; color: var(--color-text-secondary);">
                                    ${item.label}
                                </div>
                                <div style="font-size: 0.75rem; color: var(--color-text-disabled); margin-top: var(--spacing-xs);">
                                    ${formatCurrency(item.value, state.getState().currency)}
                                </div>
                            `;
                            elements.alternativeUses.appendChild(elem);
                        }
                    });
                    
                    // If no alternatives (cost too low), show message
                    if (elements.alternativeUses.children.length === 0) {
                        elements.alternativeUses.innerHTML = `
                            <div class="text-center text-secondary" style="grid-column: 1 / -1; padding: var(--spacing-xl);">
                                <span class="material-symbols-outlined" style="font-size: 3rem; opacity: 0.5;">attach_money</span>
                                <p>Meeting cost is too low for alternatives</p>
                                <p style="font-size: 0.875rem;">Add more attendees or increase duration</p>
                            </div>
                        `;
                    }
                }
                
                // Render role select dropdown
                function renderRoleSelect() {
                    elements.selectRole.innerHTML = '<option value="">Select a role...</option>';
                    
                    const allRoles = state.getAllRoles();
                    allRoles.forEach(role => {
                        const option = document.createElement('option');
                        option.value = role.id;
                        option.textContent = `${role.name} (${formatCurrency(role.salary, role.currency)}/year)`;
                        elements.selectRole.appendChild(option);
                    });
                }
                
                // Render theme selector
                function renderThemeSelector() {
                    elements.themeSelector.innerHTML = '';
                    const themes = state.getThemes();
                    
                    Object.entries(themes).forEach(([themeId, theme]) => {
                        const button = document.createElement('button');
                        button.className = `theme-option ${state.getState().theme === themeId ? 'active' : ''}`;
                        button.style.background = typeof theme.colors.background === 'string' && 
                                                  !theme.colors.background.includes('linear-gradient') 
                                                  ? theme.colors.primary 
                                                  : `linear-gradient(135deg, ${theme.colors.primary}, ${theme.colors.secondary})`;
                        button.title = theme.name;
                        button.dataset.theme = themeId;
                        
                        button.addEventListener('click', () => {
                            applyTheme(themeId);
                            document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
                            button.classList.add('active');
                        });
                        
                        elements.themeSelector.appendChild(button);
                    });
                }
                
                // Apply theme to CSS variables
                function applyTheme(themeId) {
                    const theme = state.getThemes()[themeId];
                    if (!theme) return;
                    
                    Object.entries(theme.colors).forEach(([key, value]) => {
                        const cssVar = key === 'primaryDark' ? '--color-primary-dark' : 
                                     key === 'surfaceVariant' ? '--color-surface-variant' :
                                     key === 'textSecondary' ? '--color-text-secondary' :
                                     key === 'textDisabled' ? '--color-text-disabled' :
                                     `--color-${key}`;
                        
                        document.documentElement.style.setProperty(cssVar, value);
                    });
                    
                    state.updateState({ theme: themeId });
                }
                
                // Render all UI components
                function renderAll() {
                    const costs = state.calculateCosts();
                    const alternativeUsesData = state.calculateAlternativeUses(costs.totalCost);
                    
                    renderAttendeeList(costs.attendeeDetails);
                    renderCostMeter(costs);
                    renderAlternativeUses(alternativeUsesData);
                    renderRoleSelect();
                    
                    // Update duration display
                    const duration = state.getState().duration;
                    elements.durationValue.textContent = `${duration} min`;
                    elements.durationSlider.value = duration;
                }
                
                // Initialize UI
                function init() {
                    renderAll();
                    renderThemeSelector();
                    applyTheme(state.getState().theme);
                    
                    // Load saved state
                    state.loadState();
                    
                    // If there's saved state, re-render
                    if (state.getState().attendees.length > 0) {
                        renderAll();
                    }
                }
                
                return {
                    init,
                    renderAll,
                    elements,
                    formatCurrency,
                    applyTheme
                };
            })();
            
            // ===== EVENT HANDLING MODULE =====
            const events = (function() {
                // Initialize event listeners
                function init() {
                    // Add role from library
                    document.getElementById('btn-add-from-library').addEventListener('click', () => {
                        const select = document.getElementById('select-role');
                        const roleId = select.value;
                        if (!roleId) return;
                        
                        const currentAttendees = state.getState().attendees;
                        state.updateState({
                            attendees: [...currentAttendees, {
                                id: Date.now().toString(),
                                roleId: roleId
                            }]
                        });
                        
                        ui.renderAll();
                        select.value = '';
                    });
                    
                    // Create custom role
                    document.getElementById('btn-save-role').addEventListener('click', () => {
                        const name = document.getElementById('input-role-name').value.trim();
                        const salary = parseFloat(document.getElementById('input-role-salary').value);
                        const currency = document.getElementById('select-currency').value;
                        
                        if (!name || !salary || salary <= 0) {
                            alert('Please enter a valid role name and salary');
                            return;
                        }
                        
                        const newRole = {
                            id: `custom_${Date.now()}`,
                            name: name,
                            salary: salary,
                            currency: currency
                        };
                        
                        const currentRoles = state.getState().customRoles;
                        state.updateState({
                            customRoles: [...currentRoles, newRole]
                        });
                        
                        // Clear inputs
                        document.getElementById('input-role-name').value = '';
                        document.getElementById('input-role-salary').value = '';
                        
                        ui.renderAll();
                    });
                    
                    // Duration slider
                    document.getElementById('duration-slider').addEventListener('input', (e) => {
                        const duration = parseInt(e.target.value);
                        state.updateState({ duration });
                        ui.renderAll();
                    });
                    
                    // Quick duration buttons
                    document.querySelectorAll('[data-duration]').forEach(button => {
                        button.addEventListener('click', () => {
                            const duration = parseInt(button.dataset.duration);
                            state.updateState({ duration });
                            ui.renderAll();
                        });
                    });
                    
                    // Frequency buttons
                    document.querySelectorAll('[data-frequency]').forEach(button => {
                        button.addEventListener('click', () => {
                            const frequency = parseInt(button.dataset.frequency);
                            document.querySelectorAll('[data-frequency]').forEach(btn => {
                                btn.classList.remove('active');
                            });
                            button.classList.add('active');
                            state.updateState({ frequency });
                            ui.renderAll();
                        });
                    });
                    
                    // Clear all attendees
                    document.getElementById('btn-clear-all').addEventListener('click', () => {
                        if (state.getState().attendees.length > 0 && confirm('Remove all attendees?')) {
                            state.updateState({ attendees: [] });
                            ui.renderAll();
                        }
                    });
                    
                    // Settings toggle
                    document.getElementById('btn-settings').addEventListener('click', () => {
                        const panel = document.getElementById('settings-panel');
                        panel.classList.toggle('hidden');
                    });
                    
                    // Save settings
                    document.getElementById('btn-save-settings').addEventListener('click', () => {
                        const settings = {
                            animations: document.getElementById('setting-animations').checked,
                            tooltips: document.getElementById('setting-tooltips').checked,
                            decimals: parseInt(document.getElementById('setting-decimals').value),
                            workDays: parseInt(document.getElementById('setting-workdays').value),
                            hoursPerDay: parseInt(document.getElementById('setting-hours').value)
                        };
                        
                        state.updateState({ settings });
                        ui.renderAll();
                        alert('Settings saved!');
                    });
                    
                    // Reset settings
                    document.getElementById('btn-reset-settings').addEventListener('click', () => {
                        if (confirm('Reset all settings to defaults?')) {
                            state.updateState({
                                settings: {
                                    animations: true,
                                    tooltips: true,
                                    decimals: 2,
                                    workDays: 260,
                                    hoursPerDay: 8
                                }
                            });
                            
                            // Update UI
                            document.getElementById('setting-animations').checked = true;
                            document.getElementById('setting-tooltips').checked = true;
                            document.getElementById('setting-decimals').value = 2;
                            document.getElementById('setting-workdays').value = 260;
                            document.getElementById('setting-hours').value = 8;
                            
                            ui.renderAll();
                        }
                    });
                    
                    // Export data
                    document.getElementById('btn-export-data').addEventListener('click', () => {
                        const data = {
                            state: state.getState(),
                            exportDate: new Date().toISOString(),
                            version: '2.0.0'
                        };
                        
                        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `meeting-calculator-backup-${new Date().toISOString().split('T')[0]}.json`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    });
                    
                    // Import data
                    document.getElementById('btn-import-data').addEventListener('click', () => {
                        document.getElementById('file-import').click();
                    });
                    
                    document.getElementById('file-import').addEventListener('change', (e) => {
                        const file = e.target.files[0];
                        if (!file) return;
                        
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            try {
                                const data = JSON.parse(event.target.result);
                                
                                // Basic validation
                                if (!data.state || !data.version) {
                                    throw new Error('Invalid backup file');
                                }
                                
                                if (confirm('Import this backup? Current data will be replaced.')) {
                                    state.updateState(data.state);
                                    ui.renderAll();
                                    ui.applyTheme(state.getState().theme);
                                    alert('Data imported successfully!');
                                }
                            } catch (error) {
                                alert('Error importing backup: ' + error.message);
                            }
                        };
                        reader.readAsText(file);
                        e.target.value = ''; // Reset file input
                    });
                    
                    // Add role button
                    document.getElementById('btn-add-role').addEventListener('click', () => {
                        const name = prompt('Enter role name:');
                        if (!name) return;
                        
                        const salary = parseFloat(prompt('Enter annual salary:'));
                        if (!salary || salary <= 0) {
                            alert('Invalid salary');
                            return;
                        }
                        
                        const newRole = {
                            id: `custom_${Date.now()}`,
                            name: name,
                            salary: salary,
                            currency: state.getState().currency
                        };
                        
                        const currentRoles = state.getState().customRoles;
                        state.updateState({
                            customRoles: [...currentRoles, newRole]
                        });
                        
                        ui.renderAll();
                    });
                }
                
                return { init };
            })();
            
            // ===== INITIALIZATION =====
            document.addEventListener('DOMContentLoaded', () => {
                // Initialize all modules
                state.loadState();
                ui.init();
                events.init();
                
                // Auto-save on beforeunload
                window.addEventListener('beforeunload', () => {
                    state.saveState();
                });
                
                // Keyboard shortcuts
                document.addEventListener('keydown', (e) => {
                    // Ctrl+S to save
                    if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                        e.preventDefault();
                        state.saveState();
                        ui.renderAll();
                    }
                    
                    // Escape to close modal
                    if (e.key === 'Escape') {
                        const modal = document.getElementById('modal-role');
                        if (!modal.classList.contains('hidden')) {
                            modal.classList.add('hidden');
                        }
                    }
                });
                
                // Welcome message (first visit)
                if (!localStorage.getItem('meetingCostCalculatorFirstVisit')) {
                    setTimeout(() => {
                        alert('Welcome to Meeting Cost Calculator!\n\n' +
                              '‚Ä¢ Add attendees using the Role Library\n' +
                              '‚Ä¢ Adjust duration and frequency\n' +
                              '‚Ä¢ See real-time cost calculations\n' +
                              '‚Ä¢ Customize themes and settings\n\n' +
                              'All data is stored locally in your browser.');
                        localStorage.setItem('meetingCostCalculatorFirstVisit', 'true');
                    }, 1000);
                }
            });
        })();
    </script>
</body>
</html>